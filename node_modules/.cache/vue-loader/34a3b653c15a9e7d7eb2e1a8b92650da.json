{"remainingRequest":"D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\tddd27_2021\\src\\components\\BookedAppointments.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\tddd27_2021\\src\\components\\BookedAppointments.vue","mtime":1622558197803},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622558180778},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js","mtime":1622558178184},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622558180778},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js","mtime":1622558196442}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTmV3QXBwb2ludG1lbnQgZnJvbSAiLi9OZXdBcHBvaW50bWVudC52dWUiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJhcHBvaW50bWVudHMiLA0KICBjb21wb25lbnRzOiB7DQogICAgTmV3QXBwb2ludG1lbnQNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaW50ZXJ2YWw6IG51bGwsDQogICAgICBhcHBvaW50bWVudHM6IFtdDQogICAgfQ0KICB9LA0KICAvLyBVcGRhdGUgZGF0YQ0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLnJlZnJlc2hEYXRhLCA1MCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIGdldCBhcHBvaW50bWVudCBkYXRhIGZvciB0aGUgaW5sb2dnZWQgdXNlcg0KICAgIGFzeW5jIHJlZnJlc2hEYXRhKCl7DQogICAgICBsZXQgdXJpID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9hcHBvaW50bWVudHMnOyANCiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy4kYXV0aC5nZXRUb2tlblNpbGVudGx5KCk7DQogICAgICBhd2FpdCB0aGlzLmF4aW9zLmdldCh1cmksIHsNCiAgICAgICAgcGFyYW1zOnsNCiAgICAgICAgICBlbWFpbDogdGhpcy4kYXV0aC51c2VyLmVtYWlsLA0KICAgICAgICB9LA0KICAgICAgICBoZWFkZXJzOnsNCiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCwNCiAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgIH0NCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuYXBwb2ludG1lbnRzID0gcmVzcG9uc2UuZGF0YTsgICANCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy8gQ2FuY2VsIGFuIGFwcG9pbnRtZW50DQogICAgYXN5bmMgZGVsZXRlQXBwb2ludG1lbnQoaWQpew0KICAgICAgbGV0IHVyaSA9IGBodHRwOi8vbG9jYWxob3N0OjQwMDAvYXBwb2ludG1lbnRzL2RlbGV0ZS8ke2lkfWA7DQogICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuJGF1dGguZ2V0VG9rZW5TaWxlbnRseSgpOw0KDQogICAgICB0aGlzLmF4aW9zLmRlbGV0ZSh1cmksIHsNCiAgICAgICAgcGFyYW1zOnsNCiAgICAgICAgICBlbWFpbDogdGhpcy4kYXV0aC51c2VyLmVtYWlsLA0KICAgICAgICB9LA0KICAgICAgICBoZWFkZXJzOnsNCiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCwNCiAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nDQogICAgICAgIH0NCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIHRoaXMuYXBwb2ludG1lbnRzLnNwbGljZSh0aGlzLmFwcG9pbnRtZW50cy5pbmRleE9mKHJlc3BvbnNlLmlkKSwgMSk7DQogICAgICB9KTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["BookedAppointments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookedAppointments.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>  \r\n    <NewAppointment/>\r\n    <div> \r\n      <p>Booked Appointments</p>\r\n      <table class=\"table table-hover\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Date</th>\r\n            <th>Time</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"appointment in appointments\" :key=\"appointment._id\">\r\n            <td>{{ appointment._id}}</td>\r\n            <td>{{ appointment.date}}</td>\r\n            <td>{{ appointment.time}}</td>\r\n            <td><button class=\"btn btn-danger\" @click.prevent=\"deleteAppointment(appointment._id)\">Delete</button></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NewAppointment from \"./NewAppointment.vue\";\r\n\r\nexport default {\r\n  name: \"appointments\",\r\n  components: {\r\n    NewAppointment\r\n  },\r\n  data() {\r\n    return {\r\n      interval: null,\r\n      appointments: []\r\n    }\r\n  },\r\n  // Update data\r\n  async created() {\r\n    this.interval = setInterval(this.refreshData, 50)\r\n  },\r\n  methods: {\r\n    // get appointment data for the inlogged user\r\n    async refreshData(){\r\n      let uri = 'http://localhost:4000/appointments'; \r\n      const token = await this.$auth.getTokenSilently();\r\n      await this.axios.get(uri, {\r\n        params:{\r\n          email: this.$auth.user.email,\r\n        },\r\n        headers:{\r\n          Authorization: `Bearer ${token}`,\r\n          'content-type': 'application/json'\r\n        }\r\n      }).then(response => {\r\n          this.appointments = response.data;   \r\n      });\r\n    },\r\n    // Cancel an appointment\r\n    async deleteAppointment(id){\r\n      let uri = `http://localhost:4000/appointments/delete/${id}`;\r\n      const token = await this.$auth.getTokenSilently();\r\n\r\n      this.axios.delete(uri, {\r\n        params:{\r\n          email: this.$auth.user.email,\r\n        },\r\n        headers:{\r\n          Authorization: `Bearer ${token}`,\r\n          'content-type': 'application/json'\r\n        }\r\n      }).then(response => {\r\n          this.appointments.splice(this.appointments.indexOf(response.id), 1);\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>"]}]}