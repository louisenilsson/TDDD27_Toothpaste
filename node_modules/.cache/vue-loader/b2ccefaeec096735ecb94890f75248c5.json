{"remainingRequest":"D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\tddd27_2021\\src\\views\\BookedAppointments.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\tddd27_2021\\src\\views\\BookedAppointments.vue","mtime":1622752300304},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622558180778},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js","mtime":1622558178184},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622558180778},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js","mtime":1622558196442}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTmV3QXBwb2ludG1lbnQgZnJvbSAiLi4vY29tcG9uZW50cy9OZXdBcHBvaW50bWVudCI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImFwcG9pbnRtZW50cyIsDQogIGNvbXBvbmVudHM6IHsNCiAgICBOZXdBcHBvaW50bWVudA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBpbnRlcnZhbDogbnVsbCwNCiAgICAgIGFwcG9pbnRtZW50czogW10NCiAgICB9DQogIH0sDQogIC8vIFVwZGF0ZSBkYXRhDQogIGFzeW5jIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMucmVmcmVzaERhdGEsIDIwKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8gZ2V0IGFwcG9pbnRtZW50IGRhdGEgZm9yIHRoZSBpbmxvZ2dlZCB1c2VyDQogICAgYXN5bmMgcmVmcmVzaERhdGEoKXsNCiAgICAgIGxldCB1cmkgPSAnaHR0cDovL2xvY2FsaG9zdDo0MDAwL2FwcG9pbnRtZW50cyc7IA0KICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKTsNCiAgICAgIGF3YWl0IHRoaXMuYXhpb3MuZ2V0KHVyaSwgew0KICAgICAgICBwYXJhbXM6ew0KICAgICAgICAgIGVtYWlsOiB0aGlzLiRhdXRoLnVzZXIuZW1haWwsDQogICAgICAgIH0sDQogICAgICAgIGhlYWRlcnM6ew0KICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLA0KICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgfQ0KICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy5hcHBvaW50bWVudHMgPSByZXNwb25zZS5kYXRhOyAgIA0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyBDYW5jZWwgYW4gYXBwb2ludG1lbnQNCiAgICBhc3luYyBkZWxldGVBcHBvaW50bWVudChpZCl7DQogICAgICBsZXQgdXJpID0gYGh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9hcHBvaW50bWVudHMvZGVsZXRlLyR7aWR9YDsNCiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy4kYXV0aC5nZXRUb2tlblNpbGVudGx5KCk7DQoNCiAgICAgIHRoaXMuYXhpb3MuZGVsZXRlKHVyaSwgew0KICAgICAgICBwYXJhbXM6ew0KICAgICAgICAgIGVtYWlsOiB0aGlzLiRhdXRoLnVzZXIuZW1haWwsDQogICAgICAgIH0sDQogICAgICAgIGhlYWRlcnM6ew0KICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLA0KICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicNCiAgICAgICAgfQ0KICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgdGhpcy5hcHBvaW50bWVudHMuc3BsaWNlKHRoaXMuYXBwb2ludG1lbnRzLmluZGV4T2YocmVzcG9uc2UuaWQpLCAxKTsNCiAgICAgIH0pOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["BookedAppointments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookedAppointments.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>  \r\n    <div class=\"jumbotron\" id=\"booking-jumbo\">\r\n      <h2 class=\"display-4\">Appointments</h2>\r\n      <p class=\"lead\">Here you can see your booked appointments and book a new appointment.</p>\r\n      <hr class=\"my-4\">\r\n      <div>\r\n        <h3>My appointments</h3>\r\n        <div class=\"row\">\r\n        <div v-for=\"appointment in appointments\" :key=\"appointment._id\"  id=\"card-padding\">\r\n        <div class=\"col-4\">\r\n          <div class=\"card text-center\" style=\"width: 18rem;\">\r\n                <div class=\"card-body\">\r\n                 \r\n                    <p class=\"card-text\"> <strong> Date:</strong> <br> {{appointment.date}}</p>                   \r\n                    <p class=\"card-text\"> <strong>Time:</strong> <br> {{appointment.time}}</p>\r\n                    <button class=\"btn btn-outline-danger\" @click.prevent=\"deleteAppointment(appointment._id)\">Cancel Appointment</button>\r\n                   \r\n                </div>\r\n          </div>\r\n            </div>\r\n        </div>\r\n        </div>\r\n        <NewAppointment/>\r\n      </div>\r\n\r\n    </div>\r\n     <div id=\"happy-space\">\r\n      <footer>\r\n         \r\n      </footer>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NewAppointment from \"../components/NewAppointment\";\r\n\r\nexport default {\r\n  name: \"appointments\",\r\n  components: {\r\n    NewAppointment\r\n  },\r\n  data() {\r\n    return {\r\n      interval: null,\r\n      appointments: []\r\n    }\r\n  },\r\n  // Update data\r\n  async created() {\r\n    this.interval = setInterval(this.refreshData, 20)\r\n  },\r\n  methods: {\r\n    // get appointment data for the inlogged user\r\n    async refreshData(){\r\n      let uri = 'http://localhost:4000/appointments'; \r\n      const token = await this.$auth.getTokenSilently();\r\n      await this.axios.get(uri, {\r\n        params:{\r\n          email: this.$auth.user.email,\r\n        },\r\n        headers:{\r\n          Authorization: `Bearer ${token}`,\r\n          'content-type': 'application/json'\r\n        }\r\n      }).then(response => {\r\n          this.appointments = response.data;   \r\n      });\r\n    },\r\n    // Cancel an appointment\r\n    async deleteAppointment(id){\r\n      let uri = `http://localhost:4000/appointments/delete/${id}`;\r\n      const token = await this.$auth.getTokenSilently();\r\n\r\n      this.axios.delete(uri, {\r\n        params:{\r\n          email: this.$auth.user.email,\r\n        },\r\n        headers:{\r\n          Authorization: `Bearer ${token}`,\r\n          'content-type': 'application/json'\r\n        }\r\n      }).then(response => {\r\n          this.appointments.splice(this.appointments.indexOf(response.id), 1);\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#card-padding{\r\n  margin-top: 15px;\r\n}\r\n#booking-jumbo{\r\n  background-color: #fff;\r\n  \r\n}\r\n#happy-space{\r\n  padding-bottom: 50vh\r\n}\r\n</style>"]}]}