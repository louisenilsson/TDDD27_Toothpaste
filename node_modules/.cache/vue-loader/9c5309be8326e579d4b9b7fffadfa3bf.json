{"remainingRequest":"D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\tddd27_2021\\src\\components\\NewAppointment.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\tddd27_2021\\src\\components\\NewAppointment.vue","mtime":1622469750756},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622469731099},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js","mtime":1622469728174},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622469731099},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js","mtime":1622469749018}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAibmV3QXBwb2ludG1lbnQiLA0KDQogICAgICBkYXRhKCl7DQogICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKQ0KICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpKQ0KICAgICAgICAgIGNvbnN0IG1pbkRhdGUgPSBuZXcgRGF0ZSh0b2RheSkNCiAgICAgICAgICBjb25zdCBtYXhEYXRlID0gbmV3IERhdGUodG9kYXkpDQogICAgICAgICAgbWF4RGF0ZS5zZXRNb250aChtYXhEYXRlLmdldE1vbnRoKCkgKyA2KQ0KDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgYWZ0ZXJTdWJtaXQ6IGZhbHNlLA0KICAgICAgICAgIG1pbjogbWluRGF0ZSwNCiAgICAgICAgICBtYXg6IG1heERhdGUsDQogICAgICAgICAgdGVtcEFycmF5OiBbXSwNCiAgICAgICAgICBhcHBvaW50bWVudDp7DQogICAgICAgICAgICBkYXRlOiAnJw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgbW91bnRlZCgpew0KICAgICAgbGV0IHVyaSA9ICdodHRwOi8vbG9jYWxob3N0OjQwMDAvYXBwb2ludG1lbnRzJw0KICAgICAgYXdhaXQgdGhpcy5heGlvcy5nZXQodXJpKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy50ZW1wQXJyYXkgPSByZXNwb25zZS5kYXRhDQogICAgICB9KQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgYWRkQXBwb2ludG1lbnQoKXsNCiAgICAgICAgbGV0IHVyaSA9ICdodHRwOi8vbG9jYWxob3N0OjQwMDAvYXBwb2ludG1lbnRzL2FkZCc7DQogICAgICAgIHRoaXMuYXhpb3MucG9zdCh1cmksIHRoaXMuYXBwb2ludG1lbnQpIA0KICAgICAgfSwNCiAgICAgIGRhdGVEaXNhYmxlZCh5bWQsIGRhdGUpIHsNCiAgICAgICAgLy8gRGlzYWJsZSB3ZWVrZW5kcyAoU3VuZGF5ID0gYDBgLCBTYXR1cmRheSA9IGA2YCkgYW5kDQogICAgICAgIC8vIGRpc2FibGUgZGF5cyB0aGF0IGZhbGwgb24gdGhlIDEzdGggb2YgdGhlIG1vbnRoDQogICAgICAgIGNvbnN0IHdlZWtkYXkgPSBkYXRlLmdldERheSgpDQogICAgICAgIC8vIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGRhdGUgc2hvdWxkIGJlIGRpc2FibGVkDQogICAgICAgIHJldHVybiB3ZWVrZGF5ID09PSAwIHx8IHdlZWtkYXkgPT09IDYNCiAgICAgIH0sDQogICAgICBwcmludFRpbWVzKHRlbXBBcnJheSl7DQogICAgICAgICB2YXIgdGltZXMgPSBbJzg6MDAgLSA5OjAwJywgJzk6MDAgLSAxMDowMCcsICcxMDowMCAtIDExOjAwJ10gDQogICAgICAgIC8vTMOkbmdkZW4gcMOlIGRhdGFiYXNlbg0KICAgICAgICAvL0xvb3BhIMO2dmVyIGRlbm5hIG9jaCBoaXR0YSB2aWxrYSBzb20gaGFyIHRoaXMuYXBwb2ludG1lbnQuZGF0ZQ0KICAgICAgICAvL1RhIGJvcnQgZGVzc2EgZnLDpW4gdGltZXMNCiAgICAgICAgDQoNCiAgICAgICAgLy8gbGV0IHVyaSA9ICdodHRwOi8vbG9jYWxob3N0OjQwMDAvYXBwb2ludG1lbnRzJw0KICAgICAgICAvLyB2YXIgdGVtcEFycmF5ID0gYXdhaXQgdGhpcy5heGlvcy5nZXQodXJpKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgLy8gICByZXR1cm4gcmVzcG9uc2UuZGF0YQ0KICAgICAgICAvLyB9KQ0KDQogICAgICAgIC8vIGNvbnNvbGUubG9nKHRlbXBBcnJheSkNCg0KICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGVtcEFycmF5Lmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0ZW1wQXJyYXlbaV0uZGF0ZSkNCiAgICAgICAgICBpZih0aGlzLmFwcG9pbnRtZW50LmRhdGUgPT0gdGVtcEFycmF5W2ldLmRhdGUpew0KICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IHRpbWVzLmxlbmd0aDsgaisrKXsNCiAgICAgICAgICAgICAgaWYodGltZXNbal0gPT0gdGVtcEFycmF5W2ldLnRpbWUpew0KICAgICAgICAgICAgICAgIGRlbGV0ZSB0aW1lc1tqXQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9ICAgDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAgIA0KICAgICAgICBjb25zb2xlLmxvZyh0aW1lcykNCiAgICAgICAgcmV0dXJuIHRpbWVzDQoNCiAgICAgIH0NCiAgICB9DQp9DQoNCg=="},{"version":3,"sources":["NewAppointment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA","file":"NewAppointment.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<!-- Läs mer här: https://getbootstrap.com/docs/4.0/components/modal/ -->\r\n\r\n  <!-- The modal with the form -->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"exampleModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    data-backdrop=\"static\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content modal-xl\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">Add New Appointment</h5>\r\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n        </div>\r\n        <div>\r\n          <form v-on:submit=\"addAppointment\" >\r\n            <div class=\"modal-body\">\r\n              <label for=\"datepicker-dateformat\">Select a date</label>\r\n                <b-form-datepicker id=\"datepicker-dateformat\" \r\n                :date-disabled-fn=\"dateDisabled\"\r\n                :min=\"min\"\r\n                :max=\"max\"\r\n                :date-format-options=\"{ weekday: 'long', day: 'numeric',month: 'long', year: 'numeric'}\"\r\n                v-model=\"appointment.date\"></b-form-datepicker>\r\n                <p> Value: {{ appointment.date }}</p>          \r\n            </div>\r\n            <div v-if =\"this.appointment.date != ''\" class=\"modal-body\">\r\n              <label>Select a time</label> <!-- Prova v-for -->\r\n              <b-form-radio-group class=\"pt-2\" \r\n              :options=\"printTimes(tempArray)\"  \r\n              v-model=\"appointment.time\">\r\n              </b-form-radio-group>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n              <button type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\">Close</button>\r\n              \r\n              <button type=\"submit\" class=\"btn btn-primary\">Next</button>\r\n              \r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    name: \"newAppointment\",\r\n\r\n      data(){\r\n          const now = new Date()\r\n          const today = new Date(now.getFullYear(), now.getMonth(), now.getDate())\r\n          const minDate = new Date(today)\r\n          const maxDate = new Date(today)\r\n          maxDate.setMonth(maxDate.getMonth() + 6)\r\n\r\n        return {\r\n          afterSubmit: false,\r\n          min: minDate,\r\n          max: maxDate,\r\n          tempArray: [],\r\n          appointment:{\r\n            date: ''\r\n          }\r\n        }\r\n    },\r\n    async mounted(){\r\n      let uri = 'http://localhost:4000/appointments'\r\n      await this.axios.get(uri).then(response => {\r\n        this.tempArray = response.data\r\n      })\r\n    },\r\n    methods: {\r\n      addAppointment(){\r\n        let uri = 'http://localhost:4000/appointments/add';\r\n        this.axios.post(uri, this.appointment) \r\n      },\r\n      dateDisabled(ymd, date) {\r\n        // Disable weekends (Sunday = `0`, Saturday = `6`) and\r\n        // disable days that fall on the 13th of the month\r\n        const weekday = date.getDay()\r\n        // Return `true` if the date should be disabled\r\n        return weekday === 0 || weekday === 6\r\n      },\r\n      printTimes(tempArray){\r\n         var times = ['8:00 - 9:00', '9:00 - 10:00', '10:00 - 11:00'] \r\n        //Längden på databasen\r\n        //Loopa över denna och hitta vilka som har this.appointment.date\r\n        //Ta bort dessa från times\r\n        \r\n\r\n        // let uri = 'http://localhost:4000/appointments'\r\n        // var tempArray = await this.axios.get(uri).then(response => {\r\n        //   return response.data\r\n        // })\r\n\r\n        // console.log(tempArray)\r\n\r\n        for(var i = 0; i < tempArray.length; i++){\r\n          console.log(tempArray[i].date)\r\n          if(this.appointment.date == tempArray[i].date){\r\n            for(var j = 0; j < times.length; j++){\r\n              if(times[j] == tempArray[i].time){\r\n                delete times[j]\r\n              }\r\n            }   \r\n          }\r\n        }\r\n        \r\n          \r\n        console.log(times)\r\n        return times\r\n\r\n      }\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"]}]}