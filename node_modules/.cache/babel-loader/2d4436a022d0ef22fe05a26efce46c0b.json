{"remainingRequest":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js!D:\\Documents\\tddd27_2021\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Documents\\tddd27_2021\\src\\auth\\index.js","dependencies":[{"path":"D:\\Documents\\tddd27_2021\\src\\auth\\index.js","mtime":1622558197802},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622558180778},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js","mtime":1622558178184},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\eslint-loader\\index.js","mtime":1622558185900}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICJ2dWUiOwppbXBvcnQgY3JlYXRlQXV0aDBDbGllbnQgZnJvbSAiQGF1dGgwL2F1dGgwLXNwYS1qcyI7Ci8qKiBEZWZpbmUgYSBkZWZhdWx0IGFjdGlvbiB0byBwZXJmb3JtIGFmdGVyIGF1dGhlbnRpY2F0aW9uICovCgpjb25zdCBERUZBVUxUX1JFRElSRUNUX0NBTExCQUNLID0gKCkgPT4gd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTsKCmxldCBpbnN0YW5jZTsKLyoqIFJldHVybnMgdGhlIGN1cnJlbnQgaW5zdGFuY2Ugb2YgdGhlIFNESyAqLwoKZXhwb3J0IGNvbnN0IGdldEluc3RhbmNlID0gKCkgPT4gaW5zdGFuY2U7Ci8qKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIHRoZSBBdXRoMCBTREsuIElmIG9uZSBoYXMgYWxyZWFkeSBiZWVuIGNyZWF0ZWQsIGl0IHJldHVybnMgdGhhdCBpbnN0YW5jZSAqLwoKZXhwb3J0IGNvbnN0IHVzZUF1dGgwID0gKHsKICBvblJlZGlyZWN0Q2FsbGJhY2sgPSBERUZBVUxUX1JFRElSRUNUX0NBTExCQUNLLAogIHJlZGlyZWN0VXJpID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiwKICAuLi5vcHRpb25zCn0pID0+IHsKICBpZiAoaW5zdGFuY2UpIHJldHVybiBpbnN0YW5jZTsgLy8gVGhlICdpbnN0YW5jZScgaXMgc2ltcGx5IGEgVnVlIG9iamVjdAoKICBpbnN0YW5jZSA9IG5ldyBWdWUoewogICAgZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsCiAgICAgICAgdXNlcjoge30sCiAgICAgICAgYXV0aDBDbGllbnQ6IG51bGwsCiAgICAgICAgcG9wdXBPcGVuOiBmYWxzZSwKICAgICAgICBlcnJvcjogbnVsbAogICAgICB9OwogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgIC8qKiBBdXRoZW50aWNhdGVzIHRoZSB1c2VyIHVzaW5nIGEgcG9wdXAgd2luZG93ICovCiAgICAgIGFzeW5jIGxvZ2luV2l0aFBvcHVwKG8pIHsKICAgICAgICB0aGlzLnBvcHVwT3BlbiA9IHRydWU7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCB0aGlzLmF1dGgwQ2xpZW50LmxvZ2luV2l0aFBvcHVwKG8pOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgdGhpcy5wb3B1cE9wZW4gPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHRoaXMudXNlciA9IGF3YWl0IHRoaXMuYXV0aDBDbGllbnQuZ2V0VXNlcigpOwogICAgICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTsKICAgICAgfSwKCiAgICAgIC8qKiBIYW5kbGVzIHRoZSBjYWxsYmFjayB3aGVuIGxvZ2dpbmcgaW4gdXNpbmcgYSByZWRpcmVjdCAqLwogICAgICBhc3luYyBoYW5kbGVSZWRpcmVjdENhbGxiYWNrKCkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCB0aGlzLmF1dGgwQ2xpZW50LmhhbmRsZVJlZGlyZWN0Q2FsbGJhY2soKTsKICAgICAgICAgIHRoaXMudXNlciA9IGF3YWl0IHRoaXMuYXV0aDBDbGllbnQuZ2V0VXNlcigpOwogICAgICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSB0cnVlOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSBlOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0sCgogICAgICAvKiogQXV0aGVudGljYXRlcyB0aGUgdXNlciB1c2luZyB0aGUgcmVkaXJlY3QgbWV0aG9kICovCiAgICAgIGxvZ2luV2l0aFJlZGlyZWN0KG8pIHsKICAgICAgICByZXR1cm4gdGhpcy5hdXRoMENsaWVudC5sb2dpbldpdGhSZWRpcmVjdChvKTsKICAgICAgfSwKCiAgICAgIC8qKiBSZXR1cm5zIGFsbCB0aGUgY2xhaW1zIHByZXNlbnQgaW4gdGhlIElEIHRva2VuICovCiAgICAgIGdldElkVG9rZW5DbGFpbXMobykgewogICAgICAgIHJldHVybiB0aGlzLmF1dGgwQ2xpZW50LmdldElkVG9rZW5DbGFpbXMobyk7CiAgICAgIH0sCgogICAgICAvKiogUmV0dXJucyB0aGUgYWNjZXNzIHRva2VuLiBJZiB0aGUgdG9rZW4gaXMgaW52YWxpZCBvciBtaXNzaW5nLCBhIG5ldyBvbmUgaXMgcmV0cmlldmVkICovCiAgICAgIGdldFRva2VuU2lsZW50bHkobykgewogICAgICAgIHJldHVybiB0aGlzLmF1dGgwQ2xpZW50LmdldFRva2VuU2lsZW50bHkobyk7CiAgICAgIH0sCgogICAgICAvKiogR2V0cyB0aGUgYWNjZXNzIHRva2VuIHVzaW5nIGEgcG9wdXAgd2luZG93ICovCiAgICAgIGdldFRva2VuV2l0aFBvcHVwKG8pIHsKICAgICAgICByZXR1cm4gdGhpcy5hdXRoMENsaWVudC5nZXRUb2tlbldpdGhQb3B1cChvKTsKICAgICAgfSwKCiAgICAgIC8qKiBMb2dzIHRoZSB1c2VyIG91dCBhbmQgcmVtb3ZlcyB0aGVpciBzZXNzaW9uIG9uIHRoZSBhdXRob3JpemF0aW9uIHNlcnZlciAqLwogICAgICBsb2dvdXQobykgewogICAgICAgIHJldHVybiB0aGlzLmF1dGgwQ2xpZW50LmxvZ291dChvKTsKICAgICAgfQoKICAgIH0sCgogICAgLyoqIFVzZSB0aGlzIGxpZmVjeWNsZSBtZXRob2QgdG8gaW5zdGFudGlhdGUgdGhlIFNESyBjbGllbnQgKi8KICAgIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICAgIC8vIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgU0RLIGNsaWVudCB1c2luZyBtZW1iZXJzIG9mIHRoZSBnaXZlbiBvcHRpb25zIG9iamVjdAogICAgICB0aGlzLmF1dGgwQ2xpZW50ID0gYXdhaXQgY3JlYXRlQXV0aDBDbGllbnQoewogICAgICAgIGRvbWFpbjogb3B0aW9ucy5kb21haW4sCiAgICAgICAgY2xpZW50X2lkOiBvcHRpb25zLmNsaWVudElkLAogICAgICAgIGF1ZGllbmNlOiBvcHRpb25zLmF1ZGllbmNlLAogICAgICAgIHJlZGlyZWN0X3VyaTogcmVkaXJlY3RVcmkKICAgICAgfSk7CgogICAgICB0cnkgewogICAgICAgIC8vIElmIHRoZSB1c2VyIGlzIHJldHVybmluZyB0byB0aGUgYXBwIGFmdGVyIGF1dGhlbnRpY2F0aW9uLi4KICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcygiY29kZT0iKSAmJiB3aW5kb3cubG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKCJzdGF0ZT0iKSkgewogICAgICAgICAgLy8gaGFuZGxlIHRoZSByZWRpcmVjdCBhbmQgcmV0cmlldmUgdG9rZW5zCiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGFwcFN0YXRlCiAgICAgICAgICB9ID0gYXdhaXQgdGhpcy5hdXRoMENsaWVudC5oYW5kbGVSZWRpcmVjdENhbGxiYWNrKCk7IC8vIE5vdGlmeSBzdWJzY3JpYmVycyB0aGF0IHRoZSByZWRpcmVjdCBjYWxsYmFjayBoYXMgaGFwcGVuZWQsIHBhc3NpbmcgdGhlIGFwcFN0YXRlCiAgICAgICAgICAvLyAodXNlZnVsIGZvciByZXRyaWV2aW5nIGFueSBwcmUtYXV0aGVudGljYXRpb24gc3RhdGUpCgogICAgICAgICAgb25SZWRpcmVjdENhbGxiYWNrKGFwcFN0YXRlKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLmVycm9yID0gZTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAvLyBJbml0aWFsaXplIG91ciBpbnRlcm5hbCBhdXRoZW50aWNhdGlvbiBzdGF0ZQogICAgICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gYXdhaXQgdGhpcy5hdXRoMENsaWVudC5pc0F1dGhlbnRpY2F0ZWQoKTsKICAgICAgICB0aGlzLnVzZXIgPSBhd2FpdCB0aGlzLmF1dGgwQ2xpZW50LmdldFVzZXIoKTsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfQoKICB9KTsKICByZXR1cm4gaW5zdGFuY2U7Cn07IC8vIENyZWF0ZSBhIHNpbXBsZSBWdWUgcGx1Z2luIHRvIGV4cG9zZSB0aGUgd3JhcHBlciBvYmplY3QgdGhyb3VnaG91dCB0aGUgYXBwbGljYXRpb24KCmV4cG9ydCBjb25zdCBBdXRoMFBsdWdpbiA9IHsKICBpbnN0YWxsKFZ1ZSwgb3B0aW9ucykgewogICAgVnVlLnByb3RvdHlwZS4kYXV0aCA9IHVzZUF1dGgwKG9wdGlvbnMpOwogIH0KCn07"},{"version":3,"sources":["D:/Documents/tddd27_2021/src/auth/index.js"],"names":["Vue","createAuth0Client","DEFAULT_REDIRECT_CALLBACK","window","history","replaceState","document","title","location","pathname","instance","getInstance","useAuth0","onRedirectCallback","redirectUri","origin","options","data","loading","isAuthenticated","user","auth0Client","popupOpen","error","methods","loginWithPopup","o","e","console","getUser","handleRedirectCallback","loginWithRedirect","getIdTokenClaims","getTokenSilently","getTokenWithPopup","logout","created","domain","client_id","clientId","audience","redirect_uri","search","includes","appState","Auth0Plugin","install","prototype","$auth"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\r\nimport createAuth0Client from \"@auth0/auth0-spa-js\";\r\n\r\n/** Define a default action to perform after authentication */\r\nconst DEFAULT_REDIRECT_CALLBACK = () =>\r\n  window.history.replaceState({}, document.title, window.location.pathname);\r\n\r\nlet instance;\r\n\r\n/** Returns the current instance of the SDK */\r\nexport const getInstance = () => instance;\r\n\r\n/** Creates an instance of the Auth0 SDK. If one has already been created, it returns that instance */\r\nexport const useAuth0 = ({\r\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\r\n  redirectUri = window.location.origin,\r\n  ...options\r\n}) => {\r\n  if (instance) return instance;\r\n\r\n  // The 'instance' is simply a Vue object\r\n  instance = new Vue({\r\n    data() {\r\n      return {\r\n        loading: true,\r\n        isAuthenticated: false,\r\n        user: {},\r\n        auth0Client: null,\r\n        popupOpen: false,\r\n        error: null\r\n      };\r\n    },\r\n    methods: {\r\n      /** Authenticates the user using a popup window */\r\n      async loginWithPopup(o) {\r\n        this.popupOpen = true;\r\n\r\n        try {\r\n          await this.auth0Client.loginWithPopup(o);\r\n        } catch (e) {\r\n          // eslint-disable-next-line\r\n          console.error(e);\r\n        } finally {\r\n          this.popupOpen = false;\r\n        }\r\n\r\n        this.user = await this.auth0Client.getUser();\r\n        this.isAuthenticated = true;\r\n      },\r\n      /** Handles the callback when logging in using a redirect */\r\n      async handleRedirectCallback() {\r\n        this.loading = true;\r\n        try {\r\n          await this.auth0Client.handleRedirectCallback();\r\n          this.user = await this.auth0Client.getUser();\r\n          this.isAuthenticated = true;\r\n        } catch (e) {\r\n          this.error = e;\r\n        } finally {\r\n          this.loading = false;\r\n        }\r\n      },\r\n      /** Authenticates the user using the redirect method */\r\n      loginWithRedirect(o) {\r\n        return this.auth0Client.loginWithRedirect(o);\r\n      },\r\n      /** Returns all the claims present in the ID token */\r\n      getIdTokenClaims(o) {\r\n        return this.auth0Client.getIdTokenClaims(o);\r\n      },\r\n      /** Returns the access token. If the token is invalid or missing, a new one is retrieved */\r\n      getTokenSilently(o) {\r\n        return this.auth0Client.getTokenSilently(o);\r\n      },\r\n      /** Gets the access token using a popup window */\r\n\r\n      getTokenWithPopup(o) {\r\n        return this.auth0Client.getTokenWithPopup(o);\r\n      },\r\n      /** Logs the user out and removes their session on the authorization server */\r\n      logout(o) {\r\n        return this.auth0Client.logout(o);\r\n      }\r\n    },\r\n    /** Use this lifecycle method to instantiate the SDK client */\r\n    async created() {\r\n      // Create a new instance of the SDK client using members of the given options object\r\n      this.auth0Client = await createAuth0Client({\r\n        domain: options.domain,\r\n        client_id: options.clientId,\r\n        audience: options.audience,\r\n        redirect_uri: redirectUri\r\n      });\r\n\r\n      try {\r\n        // If the user is returning to the app after authentication..\r\n        if (\r\n          window.location.search.includes(\"code=\") &&\r\n          window.location.search.includes(\"state=\")\r\n        ) {\r\n          // handle the redirect and retrieve tokens\r\n          const { appState } = await this.auth0Client.handleRedirectCallback();\r\n\r\n          // Notify subscribers that the redirect callback has happened, passing the appState\r\n          // (useful for retrieving any pre-authentication state)\r\n          onRedirectCallback(appState);\r\n        }\r\n      } catch (e) {\r\n        this.error = e;\r\n      } finally {\r\n        // Initialize our internal authentication state\r\n        this.isAuthenticated = await this.auth0Client.isAuthenticated();\r\n        this.user = await this.auth0Client.getUser();\r\n        this.loading = false;\r\n      }\r\n    }\r\n  });\r\n\r\n  return instance;\r\n};\r\n\r\n// Create a simple Vue plugin to expose the wrapper object throughout the application\r\nexport const Auth0Plugin = {\r\n  install(Vue, options) {\r\n    Vue.prototype.$auth = useAuth0(options);\r\n  }\r\n};\r\n"]}]}