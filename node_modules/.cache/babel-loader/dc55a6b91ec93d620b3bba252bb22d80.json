{"remainingRequest":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js!D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\tddd27_2021\\src\\components\\BookedAppointments.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\tddd27_2021\\src\\components\\BookedAppointments.vue","mtime":1622555325435},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622469731099},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js","mtime":1622469728174},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622469731099},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js","mtime":1622469749018},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622469731099},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js","mtime":1622469728174},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622469731099},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js","mtime":1622469749018}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L0RvY3VtZW50cy90ZGRkMjdfMjAyMS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE5ld0FwcG9pbnRtZW50IGZyb20gIi4vTmV3QXBwb2ludG1lbnQudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJhcHBvaW50bWVudHMiLAogIGNvbXBvbmVudHM6IHsKICAgIE5ld0FwcG9pbnRtZW50OiBOZXdBcHBvaW50bWVudAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGludGVydmFsOiBudWxsLAogICAgICBhcHBvaW50bWVudHM6IFtdCiAgICB9OwogIH0sCiAgLy8gVXBkYXRlIGRhdGEKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX3RoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChfdGhpcy5yZWZyZXNoRGF0YSwgNTApOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8gZ2V0IGFwcG9pbnRtZW50IGRhdGEgZm9yIHRoZSBpbmxvZ2dlZCB1c2VyCiAgICByZWZyZXNoRGF0YTogZnVuY3Rpb24gcmVmcmVzaERhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHVyaSwgdG9rZW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVyaSA9ICdodHRwOi8vbG9jYWxob3N0OjQwMDAvYXBwb2ludG1lbnRzJzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJGF1dGguZ2V0VG9rZW5TaWxlbnRseSgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICB0b2tlbiA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5heGlvcy5nZXQodXJpLCB7CiAgICAgICAgICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICAgICAgICAgIGVtYWlsOiBfdGhpczIuJGF1dGgudXNlci5lbWFpbAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0b2tlbiksCiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczIuYXBwb2ludG1lbnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyBDYW5jZWwgYW4gYXBwb2ludG1lbnQKICAgIGRlbGV0ZUFwcG9pbnRtZW50OiBmdW5jdGlvbiBkZWxldGVBcHBvaW50bWVudChpZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciB1cmksIHRva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1cmkgPSAiaHR0cDovL2xvY2FsaG9zdDo0MDAwL2FwcG9pbnRtZW50cy9kZWxldGUvIi5jb25jYXQoaWQpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy4kYXV0aC5nZXRUb2tlblNpbGVudGx5KCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHRva2VuID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgX3RoaXMzLmF4aW9zLmRlbGV0ZSh1cmksIHsKICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgICAgICAgZW1haWw6IF90aGlzMy4kYXV0aC51c2VyLmVtYWlsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KHRva2VuKSwKICAgICAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMy5hcHBvaW50bWVudHMuc3BsaWNlKF90aGlzMy5hcHBvaW50bWVudHMuaW5kZXhPZihyZXNwb25zZS5pZCksIDEpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["BookedAppointments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,OAAA,cAAA,MAAA,sBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,IADA;AAEA,MAAA,YAAA,EAAA;AAFA,KAAA;AAIA,GAVA;AAWA;AACA,EAAA,OAZA,qBAYA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,cAAA,KAAA,CAAA,QAAA,GAAA,WAAA,CAAA,KAAA,CAAA,WAAA,EAAA,EAAA,CAAA;;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,WAFA,yBAEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,GADA,GACA,oCADA;AAAA;AAAA,uBAEA,MAAA,CAAA,KAAA,CAAA,gBAAA,EAFA;;AAAA;AAEA,gBAAA,KAFA;AAAA;AAAA,uBAGA,MAAA,CAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA;AACA,kBAAA,MAAA,EAAA;AACA,oBAAA,KAAA,EAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AADA,mBADA;AAIA,kBAAA,OAAA,EAAA;AACA,oBAAA,aAAA,mBAAA,KAAA,CADA;AAEA,oCAAA;AAFA;AAJA,iBAAA,EAQA,IARA,CAQA,UAAA,QAAA,EAAA;AACA,kBAAA,MAAA,CAAA,YAAA,GAAA,QAAA,CAAA,IAAA;AACA,iBAVA,CAHA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA,KAhBA;AAiBA;AACA,IAAA,iBAlBA,6BAkBA,EAlBA,EAkBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,GADA,uDACA,EADA;AAAA;AAAA,uBAEA,MAAA,CAAA,KAAA,CAAA,gBAAA,EAFA;;AAAA;AAEA,gBAAA,KAFA;;AAIA,gBAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,GAAA,EAAA;AACA,kBAAA,MAAA,EAAA;AACA,oBAAA,KAAA,EAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AADA,mBADA;AAIA,kBAAA,OAAA,EAAA;AACA,oBAAA,aAAA,mBAAA,KAAA,CADA;AAEA,oCAAA;AAFA;AAJA,iBAAA,EAQA,IARA,CAQA,UAAA,QAAA,EAAA;AACA,kBAAA,MAAA,CAAA,YAAA,CAAA,MAAA,CAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,EAAA,CAAA;AACA,iBAVA;;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAjCA;AAfA,CAAA","sourcesContent":["<template>\r\n  <div>  \r\n    <NewAppointment/>\r\n    <div> \r\n      <p>Booked Appointments</p>\r\n      <table class=\"table table-hover\">\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Date</th>\r\n            <th>Time</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"appointment in appointments\" :key=\"appointment._id\">\r\n            <td>{{ appointment._id}}</td>\r\n            <td>{{ appointment.date}}</td>\r\n            <td>{{ appointment.time}}</td>\r\n            <td><button class=\"btn btn-danger\" @click.prevent=\"deleteAppointment(appointment._id)\">Delete</button></td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NewAppointment from \"./NewAppointment.vue\";\r\n\r\nexport default {\r\n  name: \"appointments\",\r\n  components: {\r\n    NewAppointment\r\n  },\r\n  data() {\r\n    return {\r\n      interval: null,\r\n      appointments: []\r\n    }\r\n  },\r\n  // Update data\r\n  async created() {\r\n    this.interval = setInterval(this.refreshData, 50)\r\n  },\r\n  methods: {\r\n    // get appointment data for the inlogged user\r\n    async refreshData(){\r\n      let uri = 'http://localhost:4000/appointments'; \r\n      const token = await this.$auth.getTokenSilently();\r\n      await this.axios.get(uri, {\r\n        params:{\r\n          email: this.$auth.user.email,\r\n        },\r\n        headers:{\r\n          Authorization: `Bearer ${token}`,\r\n          'content-type': 'application/json'\r\n        }\r\n      }).then(response => {\r\n          this.appointments = response.data;   \r\n      });\r\n    },\r\n    // Cancel an appointment\r\n    async deleteAppointment(id){\r\n      let uri = `http://localhost:4000/appointments/delete/${id}`;\r\n      const token = await this.$auth.getTokenSilently();\r\n\r\n      this.axios.delete(uri, {\r\n        params:{\r\n          email: this.$auth.user.email,\r\n        },\r\n        headers:{\r\n          Authorization: `Bearer ${token}`,\r\n          'content-type': 'application/json'\r\n        }\r\n      }).then(response => {\r\n          this.appointments.splice(this.appointments.indexOf(response.id), 1);\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>"],"sourceRoot":"src/components"}]}