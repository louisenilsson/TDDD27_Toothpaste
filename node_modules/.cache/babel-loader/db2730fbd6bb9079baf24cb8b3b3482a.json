{"remainingRequest":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js!D:\\Documents\\tddd27_2021\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Documents\\tddd27_2021\\src\\auth\\authGuard.js","dependencies":[{"path":"D:\\Documents\\tddd27_2021\\src\\auth\\authGuard.js","mtime":1622558197801},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622558180778},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js","mtime":1622558178184},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\eslint-loader\\index.js","mtime":1622558185900}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqDQogKiBNYWtlIGl0IHJlZGlyZWN0IHRvIGxvZ2luIHBhZ2UgaWYgbm90IHNpZ25lZCBpbg0KICovCmltcG9ydCB7IGdldEluc3RhbmNlIH0gZnJvbSAiLi9pbmRleCI7CmV4cG9ydCBjb25zdCBhdXRoR3VhcmQgPSAodG8sIGZyb20sIG5leHQpID0+IHsKICBjb25zdCBhdXRoU2VydmljZSA9IGdldEluc3RhbmNlKCk7CgogIGNvbnN0IGZuID0gKCkgPT4gewogICAgLy8gSWYgdGhlIHVzZXIgaXMgYXV0aGVudGljYXRlZCwgY29udGludWUgd2l0aCB0aGUgcm91dGUKICAgIGlmIChhdXRoU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQpIHsKICAgICAgcmV0dXJuIG5leHQoKTsKICAgIH0gLy8gT3RoZXJ3aXNlLCBsb2cgaW4KCgogICAgYXV0aFNlcnZpY2UubG9naW5XaXRoUmVkaXJlY3QoewogICAgICBhcHBTdGF0ZTogewogICAgICAgIHRhcmdldFVybDogdG8uZnVsbFBhdGgKICAgICAgfQogICAgfSk7CiAgfTsgLy8gSWYgbG9hZGluZyBoYXMgYWxyZWFkeSBmaW5pc2hlZCwgY2hlY2sgb3VyIGF1dGggc3RhdGUgdXNpbmcgYGZuKClgCgoKICBpZiAoIWF1dGhTZXJ2aWNlLmxvYWRpbmcpIHsKICAgIHJldHVybiBmbigpOwogIH0gLy8gV2F0Y2ggZm9yIHRoZSBsb2FkaW5nIHByb3BlcnR5IHRvIGNoYW5nZSBiZWZvcmUgd2UgY2hlY2sgaXNBdXRoZW50aWNhdGVkCgoKICBhdXRoU2VydmljZS4kd2F0Y2goImxvYWRpbmciLCBsb2FkaW5nID0+IHsKICAgIGlmIChsb2FkaW5nID09PSBmYWxzZSkgewogICAgICByZXR1cm4gZm4oKTsKICAgIH0KICB9KTsKfTs="},{"version":3,"sources":["D:/Documents/tddd27_2021/src/auth/authGuard.js"],"names":["getInstance","authGuard","to","from","next","authService","fn","isAuthenticated","loginWithRedirect","appState","targetUrl","fullPath","loading","$watch"],"mappings":"AAAA;AACA;AACA;AACA,SAASA,WAAT,QAA4B,SAA5B;AAEA,OAAO,MAAMC,SAAS,GAAG,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,KAAoB;AAC3C,QAAMC,WAAW,GAAGL,WAAW,EAA/B;;AAEA,QAAMM,EAAE,GAAG,MAAM;AACf;AACA,QAAID,WAAW,CAACE,eAAhB,EAAiC;AAC/B,aAAOH,IAAI,EAAX;AACD,KAJc,CAMf;;;AACAC,IAAAA,WAAW,CAACG,iBAAZ,CAA8B;AAAEC,MAAAA,QAAQ,EAAE;AAAEC,QAAAA,SAAS,EAAER,EAAE,CAACS;AAAhB;AAAZ,KAA9B;AACD,GARD,CAH2C,CAa3C;;;AACA,MAAI,CAACN,WAAW,CAACO,OAAjB,EAA0B;AACxB,WAAON,EAAE,EAAT;AACD,GAhB0C,CAkB3C;;;AACAD,EAAAA,WAAW,CAACQ,MAAZ,CAAmB,SAAnB,EAA8BD,OAAO,IAAI;AACvC,QAAIA,OAAO,KAAK,KAAhB,EAAuB;AACrB,aAAON,EAAE,EAAT;AACD;AACF,GAJD;AAKD,CAxBM","sourcesContent":["/**\r\n * Make it redirect to login page if not signed in\r\n */\r\nimport { getInstance } from \"./index\";\r\n\r\nexport const authGuard = (to, from, next) => {\r\n  const authService = getInstance();\r\n\r\n  const fn = () => {\r\n    // If the user is authenticated, continue with the route\r\n    if (authService.isAuthenticated) {\r\n      return next();\r\n    }\r\n\r\n    // Otherwise, log in\r\n    authService.loginWithRedirect({ appState: { targetUrl: to.fullPath } });\r\n  };\r\n\r\n  // If loading has already finished, check our auth state using `fn()`\r\n  if (!authService.loading) {\r\n    return fn();\r\n  }\r\n\r\n  // Watch for the loading property to change before we check isAuthenticated\r\n  authService.$watch(\"loading\", loading => {\r\n    if (loading === false) {\r\n      return fn();\r\n    }\r\n  });\r\n};\r\n"]}]}