{"remainingRequest":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js!D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\tddd27_2021\\src\\components\\NewAppointment.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\tddd27_2021\\src\\components\\NewAppointment.vue","mtime":1622471514361},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622469731099},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js","mtime":1622469728174},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622469731099},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js","mtime":1622469749018}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L0RvY3VtZW50cy90ZGRkMjdfMjAyMS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJuZXdBcHBvaW50bWVudCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgdmFyIHRvZGF5ID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIG5vdy5nZXRNb250aCgpLCBub3cuZ2V0RGF0ZSgpKTsKICAgIHZhciBtaW5EYXRlID0gbmV3IERhdGUodG9kYXkpOwogICAgdmFyIG1heERhdGUgPSBuZXcgRGF0ZSh0b2RheSk7CiAgICBtYXhEYXRlLnNldE1vbnRoKG1heERhdGUuZ2V0TW9udGgoKSArIDYpOwogICAgcmV0dXJuIHsKICAgICAgYWZ0ZXJTdWJtaXQ6IGZhbHNlLAogICAgICBtaW46IG1pbkRhdGUsCiAgICAgIG1heDogbWF4RGF0ZSwKICAgICAgdGVtcEFycmF5OiBbXSwKICAgICAgYXBwb2ludG1lbnQ6IHsKICAgICAgICBkYXRlOiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHVyaTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHVyaSA9ICdodHRwOi8vbG9jYWxob3N0OjQwMDAvYXBwb2ludG1lbnRzJzsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYXhpb3MuZ2V0KHVyaSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIF90aGlzLnRlbXBBcnJheSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRBcHBvaW50bWVudDogZnVuY3Rpb24gYWRkQXBwb2ludG1lbnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHVyaSwgdG9rZW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVyaSA9ICdodHRwOi8vbG9jYWxob3N0OjQwMDAvYXBwb2ludG1lbnRzL2FkZCc7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgdG9rZW4gPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBfdGhpczIuYXhpb3MucG9zdCh1cmksIF90aGlzMi5hcHBvaW50bWVudCwgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0b2tlbiksCiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZGF0ZURpc2FibGVkOiBmdW5jdGlvbiBkYXRlRGlzYWJsZWQoeW1kLCBkYXRlKSB7CiAgICAgIC8vIERpc2FibGUgd2Vla2VuZHMgKFN1bmRheSA9IGAwYCwgU2F0dXJkYXkgPSBgNmApIGFuZAogICAgICAvLyBkaXNhYmxlIGRheXMgdGhhdCBmYWxsIG9uIHRoZSAxM3RoIG9mIHRoZSBtb250aAogICAgICB2YXIgd2Vla2RheSA9IGRhdGUuZ2V0RGF5KCk7IC8vIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGRhdGUgc2hvdWxkIGJlIGRpc2FibGVkCgogICAgICByZXR1cm4gd2Vla2RheSA9PT0gMCB8fCB3ZWVrZGF5ID09PSA2OwogICAgfSwKICAgIHByaW50VGltZXM6IGZ1bmN0aW9uIHByaW50VGltZXModGVtcEFycmF5KSB7CiAgICAgIHZhciB0aW1lcyA9IFsnODowMCAtIDk6MDAnLCAnOTowMCAtIDEwOjAwJywgJzEwOjAwIC0gMTE6MDAnXTsgLy9Mw6RuZ2RlbiBww6UgZGF0YWJhc2VuCiAgICAgIC8vTG9vcGEgw7Z2ZXIgZGVubmEgb2NoIGhpdHRhIHZpbGthIHNvbSBoYXIgdGhpcy5hcHBvaW50bWVudC5kYXRlCiAgICAgIC8vVGEgYm9ydCBkZXNzYSBmcsOlbiB0aW1lcwogICAgICAvLyBsZXQgdXJpID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9hcHBvaW50bWVudHMnCiAgICAgIC8vIHZhciB0ZW1wQXJyYXkgPSBhd2FpdCB0aGlzLmF4aW9zLmdldCh1cmkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAvLyAgIHJldHVybiByZXNwb25zZS5kYXRhCiAgICAgIC8vIH0pCiAgICAgIC8vIGNvbnNvbGUubG9nKHRlbXBBcnJheSkKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGVtcEFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc29sZS5sb2codGVtcEFycmF5W2ldLmRhdGUpOwoKICAgICAgICBpZiAodGhpcy5hcHBvaW50bWVudC5kYXRlID09IHRlbXBBcnJheVtpXS5kYXRlKSB7CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRpbWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGlmICh0aW1lc1tqXSA9PSB0ZW1wQXJyYXlbaV0udGltZSkgewogICAgICAgICAgICAgIGRlbGV0ZSB0aW1lc1tqXTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc29sZS5sb2codGltZXMpOwogICAgICByZXR1cm4gdGltZXM7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["NewAppointment.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<!-- Läs mer här: https://getbootstrap.com/docs/4.0/components/modal/ -->\r\n\r\n  <!-- The modal with the form -->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"exampleModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n    data-backdrop=\"static\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content modal-xl\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">Add New Appointment</h5>\r\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n        </div>\r\n        <div>\r\n          <form v-on:submit=\"addAppointment\" >\r\n            <div class=\"modal-body\">\r\n              <label for=\"datepicker-dateformat\">Select a date</label>\r\n                <b-form-datepicker id=\"datepicker-dateformat\" \r\n                :date-disabled-fn=\"dateDisabled\"\r\n                :min=\"min\"\r\n                :max=\"max\"\r\n                :date-format-options=\"{ weekday: 'long', day: 'numeric',month: 'long', year: 'numeric'}\"\r\n                v-model=\"appointment.date\"></b-form-datepicker>\r\n                <p> Value: {{ appointment.date }}</p>          \r\n            </div>\r\n            <div v-if =\"this.appointment.date != ''\" class=\"modal-body\">\r\n              <label>Select a time</label> <!-- Prova v-for -->\r\n              <b-form-radio-group class=\"pt-2\" \r\n              :options=\"printTimes(tempArray)\"  \r\n              v-model=\"appointment.time\">\r\n              </b-form-radio-group>\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n              <button type=\"button\" class=\"btn btn-danger\" data-dismiss=\"modal\">Close</button>\r\n              \r\n              <button type=\"submit\" class=\"btn btn-primary\">Next</button>\r\n              \r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n    name: \"newAppointment\",\r\n\r\n      data(){\r\n          const now = new Date()\r\n          const today = new Date(now.getFullYear(), now.getMonth(), now.getDate())\r\n          const minDate = new Date(today)\r\n          const maxDate = new Date(today)\r\n          maxDate.setMonth(maxDate.getMonth() + 6)\r\n\r\n        return {\r\n          afterSubmit: false,\r\n          min: minDate,\r\n          max: maxDate,\r\n          tempArray: [],\r\n          appointment:{\r\n            date: ''\r\n          }\r\n        }\r\n    },\r\n    async mounted(){\r\n      let uri = 'http://localhost:4000/appointments'\r\n      await this.axios.get(uri).then(response => {\r\n        this.tempArray = response.data\r\n      })\r\n    },\r\n    methods: {\r\n      async addAppointment(){\r\n        let uri = 'http://localhost:4000/appointments/add';\r\n        const token = await this.$auth.getTokenSilently();\r\n\r\n        this.axios.post(uri, this.appointment, {\r\n          headers:{\r\n            Authorization: `Bearer ${token}`,\r\n            'content-type': 'application/json'\r\n          }\r\n        }) \r\n      },\r\n      dateDisabled(ymd, date) {\r\n        // Disable weekends (Sunday = `0`, Saturday = `6`) and\r\n        // disable days that fall on the 13th of the month\r\n        const weekday = date.getDay()\r\n        // Return `true` if the date should be disabled\r\n        return weekday === 0 || weekday === 6\r\n      },\r\n      printTimes(tempArray){\r\n         var times = ['8:00 - 9:00', '9:00 - 10:00', '10:00 - 11:00'] \r\n        //Längden på databasen\r\n        //Loopa över denna och hitta vilka som har this.appointment.date\r\n        //Ta bort dessa från times\r\n        \r\n\r\n        // let uri = 'http://localhost:4000/appointments'\r\n        // var tempArray = await this.axios.get(uri).then(response => {\r\n        //   return response.data\r\n        // })\r\n\r\n        // console.log(tempArray)\r\n\r\n        for(var i = 0; i < tempArray.length; i++){\r\n          console.log(tempArray[i].date)\r\n          if(this.appointment.date == tempArray[i].date){\r\n            for(var j = 0; j < times.length; j++){\r\n              if(times[j] == tempArray[i].time){\r\n                delete times[j]\r\n              }\r\n            }   \r\n          }\r\n        }\r\n        \r\n          \r\n        console.log(times)\r\n        return times\r\n\r\n      }\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":"src/components"}]}