{"remainingRequest":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js!D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Documents\\tddd27_2021\\src\\views\\BookedAppointments.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Documents\\tddd27_2021\\src\\views\\BookedAppointments.vue","mtime":1622752300304},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622558180778},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\babel-loader\\lib\\index.js","mtime":1622558178184},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1622558180778},{"path":"D:\\Documents\\tddd27_2021\\node_modules\\vue-loader\\lib\\index.js","mtime":1622558196442}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IE5ld0FwcG9pbnRtZW50IGZyb20gIi4uL2NvbXBvbmVudHMvTmV3QXBwb2ludG1lbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFwcG9pbnRtZW50cyIsCiAgY29tcG9uZW50czogewogICAgTmV3QXBwb2ludG1lbnQKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW50ZXJ2YWw6IG51bGwsCiAgICAgIGFwcG9pbnRtZW50czogW10KICAgIH07CiAgfSwKCiAgLy8gVXBkYXRlIGRhdGEKICBhc3luYyBjcmVhdGVkKCkgewogICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMucmVmcmVzaERhdGEsIDIwKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICAvLyBnZXQgYXBwb2ludG1lbnQgZGF0YSBmb3IgdGhlIGlubG9nZ2VkIHVzZXIKICAgIGFzeW5jIHJlZnJlc2hEYXRhKCkgewogICAgICBsZXQgdXJpID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9hcHBvaW50bWVudHMnOwogICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHRoaXMuJGF1dGguZ2V0VG9rZW5TaWxlbnRseSgpOwogICAgICBhd2FpdCB0aGlzLmF4aW9zLmdldCh1cmksIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGVtYWlsOiB0aGlzLiRhdXRoLnVzZXIuZW1haWwKICAgICAgICB9LAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gLAogICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0KICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5hcHBvaW50bWVudHMgPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCgogICAgLy8gQ2FuY2VsIGFuIGFwcG9pbnRtZW50CiAgICBhc3luYyBkZWxldGVBcHBvaW50bWVudChpZCkgewogICAgICBsZXQgdXJpID0gYGh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9hcHBvaW50bWVudHMvZGVsZXRlLyR7aWR9YDsKICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLiRhdXRoLmdldFRva2VuU2lsZW50bHkoKTsKICAgICAgdGhpcy5heGlvcy5kZWxldGUodXJpLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBlbWFpbDogdGhpcy4kYXV0aC51c2VyLmVtYWlsCiAgICAgICAgfSwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCwKICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9CiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuYXBwb2ludG1lbnRzLnNwbGljZSh0aGlzLmFwcG9pbnRtZW50cy5pbmRleE9mKHJlc3BvbnNlLmlkKSwgMSk7CiAgICAgIH0pOwogICAgfQoKICB9Cn07"},{"version":3,"sources":["BookedAppointments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,OAAA,cAAA,MAAA,8BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA;AADA,GAFA;;AAKA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,IADA;AAEA,MAAA,YAAA,EAAA;AAFA,KAAA;AAIA,GAVA;;AAWA;AACA,QAAA,OAAA,GAAA;AACA,SAAA,QAAA,GAAA,WAAA,CAAA,KAAA,WAAA,EAAA,EAAA,CAAA;AACA,GAdA;;AAeA,EAAA,OAAA,EAAA;AACA;AACA,UAAA,WAAA,GAAA;AACA,UAAA,GAAA,GAAA,oCAAA;AACA,YAAA,KAAA,GAAA,MAAA,KAAA,KAAA,CAAA,gBAAA,EAAA;AACA,YAAA,KAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,KAAA,CAAA,IAAA,CAAA;AADA,SADA;AAIA,QAAA,OAAA,EAAA;AACA,UAAA,aAAA,EAAA,UAAA,KAAA,EADA;AAEA,0BAAA;AAFA;AAJA,OAAA,EAQA,IARA,CAQA,QAAA,IAAA;AACA,aAAA,YAAA,GAAA,QAAA,CAAA,IAAA;AACA,OAVA,CAAA;AAWA,KAhBA;;AAiBA;AACA,UAAA,iBAAA,CAAA,EAAA,EAAA;AACA,UAAA,GAAA,GAAA,6CAAA,EAAA,EAAA;AACA,YAAA,KAAA,GAAA,MAAA,KAAA,KAAA,CAAA,gBAAA,EAAA;AAEA,WAAA,KAAA,CAAA,MAAA,CAAA,GAAA,EAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,KAAA,EAAA,KAAA,KAAA,CAAA,IAAA,CAAA;AADA,SADA;AAIA,QAAA,OAAA,EAAA;AACA,UAAA,aAAA,EAAA,UAAA,KAAA,EADA;AAEA,0BAAA;AAFA;AAJA,OAAA,EAQA,IARA,CAQA,QAAA,IAAA;AACA,aAAA,YAAA,CAAA,MAAA,CAAA,KAAA,YAAA,CAAA,OAAA,CAAA,QAAA,CAAA,EAAA,CAAA,EAAA,CAAA;AACA,OAVA;AAWA;;AAjCA;AAfA,CAAA","sourcesContent":["<template>\r\n  <div>  \r\n    <div class=\"jumbotron\" id=\"booking-jumbo\">\r\n      <h2 class=\"display-4\">Appointments</h2>\r\n      <p class=\"lead\">Here you can see your booked appointments and book a new appointment.</p>\r\n      <hr class=\"my-4\">\r\n      <div>\r\n        <h3>My appointments</h3>\r\n        <div class=\"row\">\r\n        <div v-for=\"appointment in appointments\" :key=\"appointment._id\"  id=\"card-padding\">\r\n        <div class=\"col-4\">\r\n          <div class=\"card text-center\" style=\"width: 18rem;\">\r\n                <div class=\"card-body\">\r\n                 \r\n                    <p class=\"card-text\"> <strong> Date:</strong> <br> {{appointment.date}}</p>                   \r\n                    <p class=\"card-text\"> <strong>Time:</strong> <br> {{appointment.time}}</p>\r\n                    <button class=\"btn btn-outline-danger\" @click.prevent=\"deleteAppointment(appointment._id)\">Cancel Appointment</button>\r\n                   \r\n                </div>\r\n          </div>\r\n            </div>\r\n        </div>\r\n        </div>\r\n        <NewAppointment/>\r\n      </div>\r\n\r\n    </div>\r\n     <div id=\"happy-space\">\r\n      <footer>\r\n         \r\n      </footer>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NewAppointment from \"../components/NewAppointment\";\r\n\r\nexport default {\r\n  name: \"appointments\",\r\n  components: {\r\n    NewAppointment\r\n  },\r\n  data() {\r\n    return {\r\n      interval: null,\r\n      appointments: []\r\n    }\r\n  },\r\n  // Update data\r\n  async created() {\r\n    this.interval = setInterval(this.refreshData, 20)\r\n  },\r\n  methods: {\r\n    // get appointment data for the inlogged user\r\n    async refreshData(){\r\n      let uri = 'http://localhost:4000/appointments'; \r\n      const token = await this.$auth.getTokenSilently();\r\n      await this.axios.get(uri, {\r\n        params:{\r\n          email: this.$auth.user.email,\r\n        },\r\n        headers:{\r\n          Authorization: `Bearer ${token}`,\r\n          'content-type': 'application/json'\r\n        }\r\n      }).then(response => {\r\n          this.appointments = response.data;   \r\n      });\r\n    },\r\n    // Cancel an appointment\r\n    async deleteAppointment(id){\r\n      let uri = `http://localhost:4000/appointments/delete/${id}`;\r\n      const token = await this.$auth.getTokenSilently();\r\n\r\n      this.axios.delete(uri, {\r\n        params:{\r\n          email: this.$auth.user.email,\r\n        },\r\n        headers:{\r\n          Authorization: `Bearer ${token}`,\r\n          'content-type': 'application/json'\r\n        }\r\n      }).then(response => {\r\n          this.appointments.splice(this.appointments.indexOf(response.id), 1);\r\n      });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#card-padding{\r\n  margin-top: 15px;\r\n}\r\n#booking-jumbo{\r\n  background-color: #fff;\r\n  \r\n}\r\n#happy-space{\r\n  padding-bottom: 50vh\r\n}\r\n</style>"],"sourceRoot":"src/views"}]}